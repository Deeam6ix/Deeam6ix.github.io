<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Darby's Project Hub</title>
<style>
  body {
    margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    transition: background-color 0.3s, color 0.3s;
  }

  :root {
    --bg: #0c1117;
    --text: #e6edf3;
    --header-bg: #161b22;
    --card-bg: #161b22;
    --tag-bg: #30363d;
    --link-color: #79c0ff;
    --btn-bg: #238636;
  }

  body.light {
    --bg: #f5f5f5;
    --text: #222222;
    --header-bg: #e0e0e0;
    --card-bg: #ffffff;
    --tag-bg: #cccccc;
    --link-color: #0066cc;
    --btn-bg: #2d8cf0;
  }

  header {
    background-color: var(--header-bg);
    padding: 1rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 {
    margin: 0; color: #58a6ff;
  }

  #themeToggle {
    background-color: var(--btn-bg);
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 8px;
    color: white;
    cursor: pointer;
    font-weight: bold;
  }

  .container {
    padding: 2rem;
  }

  #searchInput {
    width: 100%;
    max-width: 400px;
    padding: 0.5rem 1rem;
    border-radius: 10px;
    border: none;
    margin-bottom: 1.5rem;
    font-size: 1rem;
    background-color: var(--card-bg);
    color: var(--text);
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .project-card {
    background: var(--card-bg);
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  }

  .project-card h2 {
    margin-top: 0;
    font-size: 1.2rem;
    color: #58a6ff;
  }

  .project-card a {
    display: block;
    margin-top: 0.4rem;
    color: var(--link-color);
    text-decoration: none;
    font-size: 0.9rem;
    word-break: break-word;
  }

  .tag {
    background-color: var(--tag-bg);
    padding: 2px 8px;
    border-radius: 8px;
    font-size: 0.75rem;
    display: inline-block;
    margin: 4px 4px 0 0;
  }

  footer {
    text-align: center;
    padding: 1rem;
    background-color: var(--header-bg);
    font-size: 0.8rem;
    color: #6e7681;
  }
</style>
</head>
<body>

<header>
  <h1>Darby's Project Hub</h1>
  <button id="themeToggle" aria-label="deeam light/deeam dark">üåô Dark Mode</button>
</header>

<div class="container">
  <input type="search" id="searchInput" placeholder="Search projects by title or tags..." aria-label="Search projects" />
  <div class="projects-grid" id="projectsGrid"></div>
</div>

<footer>
  &copy; 2025 Darby Mweze ‚Äî Informatics Student
</footer>

<script>
  const themeToggleBtn = document.getElementById('themeToggle');
  const body = document.body;
  const searchInput = document.getElementById('searchInput');
  const projectsGrid = document.getElementById('projectsGrid');

  // Load theme preference
  function loadTheme() {
    const saved = localStorage.getItem('theme');
    if(saved === 'light') {
      body.classList.add('light');
      themeToggleBtn.textContent = 'üåô Dark Mode';
    } else {
      body.classList.remove('light');
      themeToggleBtn.textContent = '‚òÄÔ∏è Light Mode';
    }
  }

  // Toggle theme
  themeToggleBtn.addEventListener('click', () => {
    body.classList.toggle('light');
    if(body.classList.contains('light')) {
      localStorage.setItem('theme', 'light');
      themeToggleBtn.textContent = 'üåô Dark Mode';
    } else {
      localStorage.setItem('theme', 'dark');
      themeToggleBtn.textContent = '‚òÄÔ∏è Light Mode';
    }
  });

  loadTheme();

  // Fetch projects JSON from your GitHub repo
  const projectsURL = 'https://raw.githubusercontent.com/Deeam6ix/Deeam6ix.github.io/main/projects.json';

  let projectsData = [];

  async function loadProjects() {
    try {
      const res = await fetch(projectsURL + '?cache=' + new Date().getTime()); // avoid caching
      if(!res.ok) throw new Error('Network error loading projects.');
      projectsData = await res.json();
      renderProjects(projectsData);
    } catch (e) {
      projectsGrid.innerHTML = '<p style="color:#f44336;">Failed to load projects.</p>';
      console.error(e);
    }
  }

  // Render projects with optional filter text
  function renderProjects(projects, filterText = '') {
    const filter = filterText.toLowerCase();
    projectsGrid.innerHTML = '';

    const filtered = projects.filter(p => {
      const inTitle = p.title.toLowerCase().includes(filter);
      const inTags = p.tags.some(t => t.toLowerCase().includes(filter));
      return inTitle || inTags;
    });

    if(filtered.length === 0) {
      projectsGrid.innerHTML = '<p>No projects match your search.</p>';
      return;
    }

    filtered.forEach(p => {
      const card = document.createElement('div');
      card.className = 'project-card';

      // Files links
      let filesHTML = '';
      if(p.files && p.files.length > 0) {
        p.files.forEach(f => {
          filesHTML += `<a href="${f.url}" target="_blank" rel="noopener noreferrer" download="${f.name}">‚¨áÔ∏è ${f.name}</a>`;
        });
      }

      // Tags
      const tagsHTML = p.tags.map(t => `<span class="tag">${t}</span>`).join('');

      card.innerHTML = `
        <h2>${p.title}</h2>
        <p>${p.description}</p>
        ${p.link ? `<a href="${p.link}" target="_blank" rel="noopener noreferrer">üîó GitHub</a>` : ''}
        ${filesHTML}
        <div>${tagsHTML}</div>
      `;

      projectsGrid.appendChild(card);
    });
  }

  searchInput.addEventListener('input', (e) => {
    renderProjects(projectsData, e.target.value);
  });

  loadProjects();
</script>

</body>
</html>
